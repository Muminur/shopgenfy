#!/bin/sh

# Check commit message for AI/Claude references
COMMIT_MSG=$(cat "$1")

# Forbidden patterns (case insensitive)
FORBIDDEN_PATTERNS="claude|anthropic|ai-generated|ai-assisted|generated by ai|co-authored-by:.*claude|co-authored-by:.*anthropic"

if echo "$COMMIT_MSG" | grep -qiE "$FORBIDDEN_PATTERNS"; then
  echo "ERROR: Commit message contains forbidden AI/Claude references!"
  echo ""
  echo "Forbidden patterns: Claude, Anthropic, AI-generated, AI-assisted, Co-Authored-By: Claude"
  echo ""
  echo "Your message:"
  echo "$COMMIT_MSG"
  echo ""
  echo "Please rewrite without AI references."
  exit 1
fi

echo "Commit message check passed."
